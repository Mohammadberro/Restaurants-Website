let img_src = [
  "/assets/images/italian.jpg",
  "/assets/images/SteakHouse.jpg",
  "/assets/images/Diner.jpg",
  "/assets/images/Cafe.jpg",
  "/assets/images/Cafe2.jpg",
  "/assets/images/Fancy.jpg",
  "/assets/images/Casual.jpg",
  "/assets/images/outdoor.jpg",
  "/assets/images/campus.jpg",
  "/assets/images/shakeshake.jpg",
  "/assets/images/Cafe.jpg",
  "/assets/images/Cafe.jpg",
  "/assets/images/Cafe.jpg",
  "/assets/images/Cafe.jpg",
  "/assets/images/Cafe.jpg",
  "/assets/images/Cafe.jpg",
  "/assets/images/Cafe.jpg",
  "/assets/images/Cafe.jpg",
  "/assets/images/Cafe.jpg",
  "/assets/images/Cafe.jpg",
  "/assets/images/Cafe.jpg",
];
let res_name = [
  "Italiano",
  "Steak House",
  "Diner",
  "Chop Bar and Grill",
  "Urban Orchid Lounge",
  "Merry Vivant Lounge",
  "Cobalt Vista Bar and Grille",
  "Tart Dove CafÃ©",
  "Farmer's Plum Cookery",
  "Shake Shak",
  "Restaurant-Name",
  "Restaurant-Name",
  "Restaurant-Name",
  "Restaurant-Name",
  "Restaurant-Name",
  "Restaurant-Name",
  "Restaurant-Name",
  "Restaurant-Name",
  "Restaurant-Name",
  "Restaurant-Name",
  "Restaurant-Name",
];

let res_menue1 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Soda", price: "1$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue2 = [
  { plate_name: "Baked Potatoes", price: "5$" },
  { plate_name: "Mashed Potatoes", price: "7$" },
  { plate_name: "Wedges", price: "8$" },
  { plate_name: "Ribeye Steak", price: "16$" },
  { plate_name: "TomoHawk", price: "18$" },
  { plate_name: "Rosto", price: "20$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Barbeque Ribs", price: "22$" },
  { plate_name: "Fresh Juice", price: "3$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue3 = [
  { plate_name: "Mac'n Cheese", price: "5$" },
  { plate_name: "Pancakes", price: "7$" },
  { plate_name: "Waffles ", price: "10$" },
  { plate_name: "Crepe", price: "10$" },
  { plate_name: "Apple Pie", price: "12$" },
  { plate_name: "Chicken Pot Pie", price: "14$" },
  { plate_name: "Vegetable Stew", price: "4$" },
  { plate_name: "Meat Stew", price: "6$" },
  { plate_name: "Cofee", price: "2$" },
  { plate_name: "Tea", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue4 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue5 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue6 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue7 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue8 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue9 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue10 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue11 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue12 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue13 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue14 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue15 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue16 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue17 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue18 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue19 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menue20 = [
  { plate_name: "Burgur", price: "5$" },
  { plate_name: "Cheese Burgur", price: "7$" },
  { plate_name: "Pepperoni Pizza ", price: "10$" },
  { plate_name: "Vegeterrain Pizza", price: "10$" },
  { plate_name: "Meat Lover Pizza", price: "12$" },
  { plate_name: "Steak", price: "14$" },
  { plate_name: "Salad", price: "4$" },
  { plate_name: "Fettuccine Alfredo", price: "13$" },
  { plate_name: "Garlic Bread", price: "2$" },
  { plate_name: "Water", price: "1$" },
];
let res_menus = [
  res_menue1,
  res_menue2,
  res_menue3,
  res_menue4,
  res_menue5,
  res_menue6,
  res_menue7,
  res_menue8,
  res_menue9,
  res_menue10,
  res_menue11,
  res_menue12,
  res_menue13,
  res_menue14,
  res_menue15,
  res_menue16,
  res_menue17,
  res_menue18,
  res_menue19,
  res_menue20,
];
localStorage.setItem("img_src", JSON.stringify(img_src));
localStorage.setItem("res_name", JSON.stringify(res_name));
localStorage.setItem("res_menus", JSON.stringify(res_menus));
localStorage.setItem("login", "true");

window.onload = () => {
  let url = window.location.href;
  if (checkSearchURL(url) && !checkDisplayURL(url)) {
    let search = SearchURL(url);
    console.log(search);
    loadSearch(search);
  }
  if (checkDisplayURL(url)) {
    let rest = SearchURL(url);
    DisplayRest(rest);
  }
  if (window.location.href.includes("Rest")) {
    loadAllRest();
  }
};
function checkSearchURL(url) {
  if (url.includes("?s")) {
    return true;
  } else {
    return false;
  }
}
function checkDisplayURL(url) {
  if (url.includes("?r")) {
    return true;
  } else {
    return false;
  }
}
function checkLogin(url) {
  if (url.includes("?u=")) {
    return true;
  } else {
    return false;
  }
}
function Search(input) {
  let link = window.location.href;
  if (!checkSearchURL(link)) {
    window.location.href += "?s=" + input.value;
  } else {
    let new_link = "/assets/pages/Restaurants.html";
    for (let i = 0; i < link.length; i++) {
      if (link[i] == "?") {
        new_link += "?s=" + input.value;
        break;
      }
    }
    window.location.href = new_link;
  }
}
function SearchURL(input) {
  let result = "";
  let index = 0;
  for (let i = 0; i < input.length; i++) {
    if (input[i] == "=") {
      index = i + 1;
      break;
    }
  }
  for (let i = index; i < input.length; i++) {
    result += input[i];
  }
  result = result.replace("%20"," ");
  return result;
}

function favorite() {
  let rest = document.getElementById("favorite");
  if (rest.style.filter != "grayscale(1)") {
    rest.style.filter = "grayscale(1)";
  } else {
    rest.style.filter = "grayscale(0)";
  }
}

function loadAllRest() {
  let name = JSON.parse(localStorage.getItem("res_name") || "[]");
  let max = name.length;
  let src = JSON.parse(localStorage.getItem("img_src") || "[]");
  let div = document.getElementById("Display-Rest");
  let section = document.createElement("div");
  section.classList.add("display-section");
  for (let i = 0; i < max; i++) {
    let card = document.createElement("div");
    let img_card = document.createElement("div");
    let img = document.createElement("img");
    let card_body = document.createElement("div");
    let btn = document.createElement("button");

    card.classList.add("card");
    img_card.classList.add("card-header");
    card_body.classList.add("card-body");
    img.classList.add("card-img");
    btn.classList.add("main-light-bg");

    img.src = src[i];
    btn.id = name[i];
    btn.innerText = "Open";
    btn.href = "/assets/pages/DisplayRest.html/";
    btn.onclick = () => {
      window.location.href = "/assets/pages/DisplayRest.html?r=" + btn.id;
    };

    img_card.appendChild(img);
    card_body.appendChild(btn);
    card.appendChild(img_card);
    card.appendChild(card_body);
    section.appendChild(card);
  }

  div.appendChild(section);
}
function loadSearch(res) {
  let name = JSON.parse(localStorage.getItem("res_name") || "[]");
  let src = JSON.parse(localStorage.getItem("img_src") || "[]");
  let max = name.length;
  let div = document.getElementById("Display-Rest");
  let section = document.createElement("div");
  section.classList.add("display-section");
  for (let i = 0; i < max; i++) {
    console.log(res.innertext)
    if (name[i].includes(res.value)) {
      let card = document.createElement("div");
      let img_card = document.createElement("div");
      let img = document.createElement("img");
      let card_body = document.createElement("div");
      let btn = document.createElement("button");

      card.classList.add("card");
      img_card.classList.add("card-header");
      card_body.classList.add("card-body");
      img.classList.add("card-img");
      btn.classList.add("main-light-bg");

      img.src = src[i];
      btn.id = name[i];
      btn.innerText = "Open";
      btn.href = "/assets/pages/DisplayRest.html/";
      btn.onclick = () => {
        window.location.href = "/assets/pages/DisplayRest.html?r=" + btn.id;
      };

      img_card.appendChild(img);
      card_body.appendChild(btn);
      card.appendChild(img_card);
      card.appendChild(card_body);
      section.appendChild(card);
    }
  }
  div.appendChild(section);
}
function DisplayRest(url) {
  let rest = JSON.parse(localStorage.getItem("res_name") || "[]");
  let src = JSON.parse(localStorage.getItem("img_src") || "[]");
  let menus = JSON.parse(localStorage.getItem("res_menus") || "[]");
  let max = rest.length;
  let result = SearchURL(url);
  let index = 0;
  for (let i = 0; i < max; i++) {
    if (rest[i] == result) {
      index = i;
      break;
    }
  }
  let name = document.getElementById("textARC");
  let logo = document.getElementById("res-logo");
  let menu = document.getElementById("Menu");

  name.innerText = rest[index];
  logo.src = src[index];
  let list = document.createElement("ul");
  let menu_list = menus[index];
  for (i in menu_list) {
    let item = document.createElement("li");
    item.innerText = menu_list[i].plate_name + " " + menu_list[i].price;
    list.appendChild(item);
  }
  menu.appendChild(list);
}
